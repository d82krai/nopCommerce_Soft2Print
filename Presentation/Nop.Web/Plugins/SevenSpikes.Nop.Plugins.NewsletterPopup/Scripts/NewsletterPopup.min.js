!function (r, s) { var n = "newsletterSubscribePluginCookie"; function o() { r(".newsletter-subscribe-popup-overlay").fadeIn(function () { r.event.trigger({ type: "newsletterPopupShownEvent" }) }) } function c() { function t(t, s) { r(".consent-error").hide(); var n = s.find(".newsletter-subscribe-text").val(), e = r(".newsletter-gdpr-consent-checkbox"); !t || 0 === e.length || e && e.is(":checked") ? (s.find(".subscribe-loading-progress").show(), e = { subscribe: t, email: n }, addAntiForgeryToken(e), r.ajax({ cache: !1, type: "POST", url: s.attr("data-newsLetterSubscribeUrl"), data: e }).done(function (e) { t && r.ajax({ cache: !1, type: "POST", url: s.attr("data-newsLetterLogNewsletterGdprConsentUrl"), data: { email: n } }), s.find(".subscribe-loading-progress").hide(), s.find(".newsletter-result-block").html(e.Result), e.Success ? (s.find(".newsletter-subscribe-block").addClass("hidden"), s.find(".newsletter-result-block").show()) : s.find(".newsletter-result-block").fadeIn("slow").delay(2e3).fadeOut("slow") }).fail(function () { alert("Failed to subscribe."), s.find(".subscribe-loading-progress").hide() })) : r(".consent-error").show() } r(".newsletter-subscribe-popup-overlay .newsletter-subscribe-button").on("click", function () { var e = r(this).closest(".newsletter-subscribe-popup-overlay"); "true" !== e.attr("data-allowToUnsubscribe").toLowerCase() || e.find(".newsletter_subscribe").is(":checked") ? t(!0, e) : t(!1, e) }), r(".newsletter-subscribe-text").keydown(function (e) { if (13 === e.keyCode) return r(this).closest(".newsletter").find(".newsletter-subscribe-button").click(), !1 }) } function i() { var e = r(".newsletter-gdpr-checkbox-content"); r(".newsletter_unsubscribe").is(":checked") ? e.hide() : e.show() } r(document).ready(function () { var e, t; 0 !== (t = r(".newsletter-subscribe-popup-overlay")).length && (e = t.attr("data-showPopupDelay"), t = t.attr("data-popupOpenerSelector"), "" !== s.getCookie(n) || null == e || 0 <= (e = parseInt(e) || 0) && setTimeout(function () { o() }, e), r(".newsletter-subscribe-popup").on("click", function (e) { e.stopPropagation() }), r(document).on("click", t, function (e) { e.preventDefault(), o() }), r(".newsletter-subscribe-popup-overlay, .newsletter-subscribe-popup-overlay .close-popup").on("click", function (e) { e.preventDefault(), r(".newsletter-subscribe-popup .newsletter-subscribe-popup-checkbox").is(":checked") && s.setCookie(n, 1, 5), r(".newsletter-subscribe-popup-overlay").fadeOut() })), c(), i(), r(".newsletter-subscribe .options input").on("click", i) }), r(window).load(function () { var e = r(".newsletter-subscribe-popup-overlay"); 0 !== e.length && (e = e.attr("data-popupOpenerSelector"), r(e).off("click")) }) }(jQuery, cookieHelper);